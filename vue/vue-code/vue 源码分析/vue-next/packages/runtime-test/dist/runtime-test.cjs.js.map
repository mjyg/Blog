{"version":3,"file":"runtime-test.cjs.js","sources":["../src/nodeOps.ts","../../shared/src/index.ts","../src/patchProp.ts","../src/serialize.ts","../src/triggerEvent.ts","../src/jestUtils.ts","../src/index.ts"],"sourcesContent":["import { markNonReactive } from '@vue/reactivity'\n\nexport const enum NodeTypes {\n  TEXT = 'text',\n  ELEMENT = 'element',\n  COMMENT = 'comment'\n}\n\nexport const enum NodeOpTypes {\n  CREATE = 'create',\n  INSERT = 'insert',\n  REMOVE = 'remove',\n  SET_TEXT = 'setText',\n  SET_ELEMENT_TEXT = 'setElementText',\n  PATCH = 'patch'\n}\n\nexport interface TestElement {\n  id: number\n  type: NodeTypes.ELEMENT\n  parentNode: TestElement | null\n  tag: string\n  children: TestNode[]\n  props: Record<string, any>\n  eventListeners: Record<string, Function | Function[]> | null\n}\n\nexport interface TestText {\n  id: number\n  type: NodeTypes.TEXT\n  parentNode: TestElement | null\n  text: string\n}\n\nexport interface TestComment {\n  id: number\n  type: NodeTypes.COMMENT\n  parentNode: TestElement | null\n  text: string\n}\n\nexport type TestNode = TestElement | TestText | TestComment\n\nexport interface NodeOp {\n  type: NodeOpTypes\n  nodeType?: NodeTypes\n  tag?: string\n  text?: string\n  targetNode?: TestNode\n  parentNode?: TestElement\n  refNode?: TestNode | null\n  propKey?: string\n  propPrevValue?: any\n  propNextValue?: any\n}\n\nlet nodeId: number = 0\nlet recordedNodeOps: NodeOp[] = []\n\nexport function logNodeOp(op: NodeOp) {\n  recordedNodeOps.push(op)\n}\n\nexport function resetOps() {\n  recordedNodeOps = []\n}\n\nexport function dumpOps(): NodeOp[] {\n  const ops = recordedNodeOps.slice()\n  resetOps()\n  return ops\n}\n\nfunction createElement(tag: string): TestElement {\n  const node: TestElement = {\n    id: nodeId++,\n    type: NodeTypes.ELEMENT,\n    tag,\n    children: [],\n    props: {},\n    parentNode: null,\n    eventListeners: null\n  }\n  logNodeOp({\n    type: NodeOpTypes.CREATE,\n    nodeType: NodeTypes.ELEMENT,\n    targetNode: node,\n    tag\n  })\n  // avoid test nodes from being observed\n  markNonReactive(node)\n  return node\n}\n\nfunction createText(text: string): TestText {\n  const node: TestText = {\n    id: nodeId++,\n    type: NodeTypes.TEXT,\n    text,\n    parentNode: null\n  }\n  logNodeOp({\n    type: NodeOpTypes.CREATE,\n    nodeType: NodeTypes.TEXT,\n    targetNode: node,\n    text\n  })\n  // avoid test nodes from being observed\n  markNonReactive(node)\n  return node\n}\n\nfunction createComment(text: string): TestComment {\n  const node: TestComment = {\n    id: nodeId++,\n    type: NodeTypes.COMMENT,\n    text,\n    parentNode: null\n  }\n  logNodeOp({\n    type: NodeOpTypes.CREATE,\n    nodeType: NodeTypes.COMMENT,\n    targetNode: node,\n    text\n  })\n  // avoid test nodes from being observed\n  markNonReactive(node)\n  return node\n}\n\nfunction setText(node: TestText, text: string) {\n  logNodeOp({\n    type: NodeOpTypes.SET_TEXT,\n    targetNode: node,\n    text\n  })\n  node.text = text\n}\n\nfunction insert(child: TestNode, parent: TestElement, ref?: TestNode | null) {\n  let refIndex\n  if (ref != null) {\n    refIndex = parent.children.indexOf(ref)\n    if (refIndex === -1) {\n      console.error('ref: ', ref)\n      console.error('parent: ', parent)\n      throw new Error('ref is not a child of parent')\n    }\n  }\n  logNodeOp({\n    type: NodeOpTypes.INSERT,\n    targetNode: child,\n    parentNode: parent,\n    refNode: ref\n  })\n  // remove the node first, but don't log it as a REMOVE op\n  remove(child, false)\n  // re-calculate the ref index because the child's removal may have affected it\n  refIndex = ref ? parent.children.indexOf(ref) : -1\n  if (refIndex === -1) {\n    parent.children.push(child)\n    child.parentNode = parent\n  } else {\n    parent.children.splice(refIndex, 0, child)\n    child.parentNode = parent\n  }\n}\n\nfunction remove(child: TestNode, logOp: boolean = true) {\n  const parent = child.parentNode\n  if (parent != null) {\n    if (logOp) {\n      logNodeOp({\n        type: NodeOpTypes.REMOVE,\n        targetNode: child,\n        parentNode: parent\n      })\n    }\n    const i = parent.children.indexOf(child)\n    if (i > -1) {\n      parent.children.splice(i, 1)\n    } else {\n      console.error('target: ', child)\n      console.error('parent: ', parent)\n      throw Error('target is not a childNode of parent')\n    }\n    child.parentNode = null\n  }\n}\n\nfunction setElementText(el: TestElement, text: string) {\n  logNodeOp({\n    type: NodeOpTypes.SET_ELEMENT_TEXT,\n    targetNode: el,\n    text\n  })\n  el.children.forEach(c => {\n    c.parentNode = null\n  })\n  if (!text) {\n    el.children = []\n  } else {\n    el.children = [\n      {\n        id: nodeId++,\n        type: NodeTypes.TEXT,\n        text,\n        parentNode: el\n      }\n    ]\n  }\n}\n\nfunction parentNode(node: TestNode): TestElement | null {\n  return node.parentNode\n}\n\nfunction nextSibling(node: TestNode): TestNode | null {\n  const parent = node.parentNode\n  if (!parent) {\n    return null\n  }\n  const i = parent.children.indexOf(node)\n  return parent.children[i + 1] || null\n}\n\nfunction querySelector(): any {\n  throw new Error('querySelector not supported in test renderer.')\n}\n\nexport const nodeOps = {\n  insert,\n  remove,\n  createElement,\n  createText,\n  createComment,\n  setText,\n  setElementText,\n  parentNode,\n  nextSibling,\n  querySelector\n}\n","export * from './patchFlags'\nexport { isGloballyWhitelisted } from './globalsWhitelist'\nexport { makeMap } from './makeMap'\n\nexport const EMPTY_OBJ: { readonly [key: string]: any } = __DEV__\n  ? Object.freeze({})\n  : {}\nexport const EMPTY_ARR: [] = []\n\nexport const NOOP = () => {}\n\n/**\n * Always return false.\n */\nexport const NO = () => false\n\nexport const isOn = (key: string) => key[0] === 'o' && key[1] === 'n'\n\nexport const extend = <T extends object, U extends object>(\n  a: T,\n  b: U\n): T & U => {\n  for (const key in b) {\n    ;(a as any)[key] = b[key]\n  }\n  return a as any\n}\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nexport const hasOwn = (\n  val: object,\n  key: string | symbol\n): key is keyof typeof val => hasOwnProperty.call(val, key)\n\nexport const isArray = Array.isArray\nexport const isFunction = (val: unknown): val is Function =>\n  typeof val === 'function'\nexport const isString = (val: unknown): val is string => typeof val === 'string'\nexport const isSymbol = (val: unknown): val is symbol => typeof val === 'symbol'\nexport const isObject = (val: unknown): val is Record<any, any> =>\n  val !== null && typeof val === 'object'\n\nexport function isPromise<T = any>(val: unknown): val is Promise<T> {\n  return isObject(val) && isFunction(val.then) && isFunction(val.catch)\n}\n\nexport const objectToString = Object.prototype.toString\nexport const toTypeString = (value: unknown): string =>\n  objectToString.call(value)\n\nexport const isPlainObject = (val: unknown): val is object =>\n  toTypeString(val) === '[object Object]'\n\nexport const isReservedProp = (key: string): boolean =>\n  key === 'key' || key === 'ref' || key === '$once' || key.startsWith(`onVnode`)\n\nconst camelizeRE = /-(\\w)/g\nexport const camelize = (str: string): string => {\n  return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''))\n}\n\nconst hyphenateRE = /\\B([A-Z])/g\nexport const hyphenate = (str: string): string => {\n  return str.replace(hyphenateRE, '-$1').toLowerCase()\n}\n\nexport const capitalize = (str: string): string => {\n  return str.charAt(0).toUpperCase() + str.slice(1)\n}\n","import { TestElement, logNodeOp, NodeOpTypes } from './nodeOps'\nimport { isOn } from '@vue/shared'\n\nexport function patchProp(\n  el: TestElement,\n  key: string,\n  nextValue: any,\n  prevValue: any\n) {\n  logNodeOp({\n    type: NodeOpTypes.PATCH,\n    targetNode: el,\n    propKey: key,\n    propPrevValue: prevValue,\n    propNextValue: nextValue\n  })\n  el.props[key] = nextValue\n  if (isOn(key)) {\n    const event = key.slice(2).toLowerCase()\n    ;(el.eventListeners || (el.eventListeners = {}))[event] = nextValue\n  }\n}\n","import {\n  TestElement,\n  TestNode,\n  NodeTypes,\n  TestText,\n  TestComment\n} from './nodeOps'\nimport { isOn } from '@vue/shared'\n\nexport function serialize(\n  node: TestNode,\n  indent: number = 0,\n  depth: number = 0\n): string {\n  if (node.type === NodeTypes.ELEMENT) {\n    return serializeElement(node, indent, depth)\n  } else {\n    return serializeText(node, indent, depth)\n  }\n}\n\nexport function serializeInner(\n  node: TestElement,\n  indent: number = 0,\n  depth: number = 0\n) {\n  const newLine = indent ? `\\n` : ``\n  return node.children.length\n    ? newLine +\n        node.children.map(c => serialize(c, indent, depth + 1)).join(newLine) +\n        newLine\n    : ``\n}\n\nfunction serializeElement(\n  node: TestElement,\n  indent: number,\n  depth: number\n): string {\n  const props = Object.keys(node.props)\n    .map(key => {\n      const value = node.props[key]\n      return isOn(key) || value == null ? `` : `${key}=${JSON.stringify(value)}`\n    })\n    .filter(Boolean)\n    .join(' ')\n  const padding = indent ? ` `.repeat(indent).repeat(depth) : ``\n  return (\n    `${padding}<${node.tag}${props ? ` ${props}` : ``}>` +\n    `${serializeInner(node, indent, depth)}` +\n    `${padding}</${node.tag}>`\n  )\n}\n\nfunction serializeText(\n  node: TestText | TestComment,\n  indent: number,\n  depth: number\n): string {\n  const padding = indent ? ` `.repeat(indent).repeat(depth) : ``\n  return (\n    padding +\n    (node.type === NodeTypes.COMMENT ? `<!--${node.text}-->` : node.text)\n  )\n}\n","import { TestElement } from './nodeOps'\n\nexport function triggerEvent(\n  el: TestElement,\n  event: string,\n  payload: any[] = []\n) {\n  const { eventListeners } = el\n  if (eventListeners) {\n    const listener = eventListeners[event]\n    if (listener) {\n      if (Array.isArray(listener)) {\n        for (let i = 0; i < listener.length; i++) {\n          listener[i](...payload)\n        }\n      } else {\n        listener(...payload)\n      }\n    }\n  }\n}\n","declare global {\n  namespace jest {\n    interface Matchers<R> {\n      toHaveBeenWarned(): R\n      toHaveBeenWarnedLast(): R\n      toHaveBeenWarnedTimes(n: number): R\n    }\n  }\n}\n\nexport function mockWarn() {\n  expect.extend({\n    toHaveBeenWarned(received: string) {\n      asserted.add(received)\n      const passed = warn.mock.calls.some(\n        args => args[0].indexOf(received) > -1\n      )\n      if (passed) {\n        return {\n          pass: true,\n          message: () => `expected \"${received}\" not to have been warned.`\n        }\n      } else {\n        const msgs = warn.mock.calls.map(args => args[0]).join('\\n - ')\n        return {\n          pass: false,\n          message: () =>\n            `expected \"${received}\" to have been warned.\\n\\nActual messages:\\n\\n - ${msgs}`\n        }\n      }\n    },\n\n    toHaveBeenWarnedLast(received: string) {\n      asserted.add(received)\n      const passed =\n        warn.mock.calls[warn.mock.calls.length - 1][0].indexOf(received) > -1\n      if (passed) {\n        return {\n          pass: true,\n          message: () => `expected \"${received}\" not to have been warned last.`\n        }\n      } else {\n        const msgs = warn.mock.calls.map(args => args[0]).join('\\n - ')\n        return {\n          pass: false,\n          message: () =>\n            `expected \"${received}\" to have been warned last.\\n\\nActual messages:\\n\\n - ${msgs}`\n        }\n      }\n    },\n\n    toHaveBeenWarnedTimes(received: string, n: number) {\n      asserted.add(received)\n      let found = 0\n      warn.mock.calls.forEach(args => {\n        if (args[0].indexOf(received) > -1) {\n          found++\n        }\n      })\n\n      if (found === n) {\n        return {\n          pass: true,\n          message: () =>\n            `expected \"${received}\" to have been warned ${n} times.`\n        }\n      } else {\n        return {\n          pass: false,\n          message: () =>\n            `expected \"${received}\" to have been warned ${n} times but got ${found}.`\n        }\n      }\n    }\n  })\n\n  let warn: jest.SpyInstance\n  const asserted: Set<string> = new Set()\n\n  beforeEach(() => {\n    asserted.clear()\n    warn = jest.spyOn(console, 'warn')\n    warn.mockImplementation(() => {})\n  })\n\n  afterEach(() => {\n    const assertedArray = Array.from(asserted)\n    const nonAssertedWarnings = warn.mock.calls\n      .map(args => args[0])\n      .filter(received => {\n        return !assertedArray.some(assertedMsg => {\n          return received.indexOf(assertedMsg) > -1\n        })\n      })\n    warn.mockRestore()\n    if (nonAssertedWarnings.length) {\n      nonAssertedWarnings.forEach(warning => {\n        console.warn(warning)\n      })\n      throw new Error(`test case threw unexpected warnings.`)\n    }\n  })\n}\n","import { createRenderer, VNode } from '@vue/runtime-core'\nimport { nodeOps, TestNode, TestElement } from './nodeOps'\nimport { patchProp } from './patchProp'\nimport { serializeInner } from './serialize'\n\nconst { render, createApp } = createRenderer<TestNode, TestElement>({\n  patchProp,\n  ...nodeOps\n})\n\nexport { render, createApp }\n\n// convenience for one-off render validations\nexport function renderToString(vnode: VNode) {\n  const root = nodeOps.createElement('div')\n  render(vnode, root)\n  return serializeInner(root)\n}\n\nexport * from './triggerEvent'\nexport * from './serialize'\nexport * from './nodeOps'\nexport * from './jestUtils'\nexport * from '@vue/runtime-core'\n"],"names":["markNonReactive","createRenderer"],"mappings":"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"}